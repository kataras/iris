# [![Logo created by @santoshanand](logo_white_35_24.png)](https://iris-go.com) Iris

[![build status](https://img.shields.io/travis/kataras/iris/master.svg?style=flat-square)](https://travis-ci.org/kataras/iris)[![Backers on Open Collective](https://opencollective.com/iris/backers/badge.svg?style=flat-square)](#backers)[![Sponsors on Open Collective](https://opencollective.com/iris/sponsors/badge.svg?style=flat-square)](#sponsors)[![report card](https://img.shields.io/badge/report%20card-a%2B-ff3333.svg?style=flat-square)](http://goreportcard.com/report/kataras/iris)[![github closed issues](https://img.shields.io/github/issues-closed-raw/kataras/iris.svg?style=flat-square)](https://github.com/kataras/iris/issues?q=is%3Aissue+is%3Aclosed)[![release](https://img.shields.io/github/release/kataras/iris.svg?style=flat-square)](https://github.com/kataras/iris/releases)[![view examples](https://img.shields.io/badge/learn%20by-examples-0077b3.svg?style=flat-square)](https://github.com/kataras/iris/tree/master/_examples)[![chat](https://img.shields.io/badge/community-%20chat-00BCD4.svg?style=flat-square)](https://kataras.rocket.chat/channel/iris)[![CLA assistant](https://cla-assistant.io/readme/badge/kataras/iris?style=flat-square)](https://cla-assistant.io/kataras/iris)

<a target='_blank' rel='nofollow' href='https://app.codesponsor.io/link/Qw6E1MTHvUJW6BtwUUf9qwsy/kataras/iris'>
  <img alt='Sponsor' width='888' height='68' src='https://app.codesponsor.io/embed/Qw6E1MTHvUJW6BtwUUf9qwsy/kataras/iris.svg' />
</a>

Irisæ˜¯ä¸€ä¸ªè¶…å¿«ï¼Œä½¿ç”¨ç®€å•å¹¶ä¸”éå¸¸é«˜æ•ˆçš„Goè¯­è¨€Webå¼€å‘æ¡†æ¶ã€‚
Iris is a fast, simple and efficient web framework for Go.

IrisåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†ä½¿ç”¨åˆå¾ˆç®€å•ï¼Œå®ƒå°†ä¼šæ˜¯ä½ ä¸‹ä¸€ä¸ªç½‘ç«™ã€APIæœåŠ¡æˆ–è€…åˆ†å¸ƒå¼åº”ç”¨åŸºç¡€æ¡†æ¶çš„ä¸äºŒä¹‹é€‰ã€‚
Iris provides a beautifully expressive and easy to use foundation for your next website, API, or distributed app.

çœ‹çœ‹[åˆ«äººæ˜¯å¦‚ä½•è¯„ä»·Iris](https://www.youtube.com/watch?v=jGx0LkuUs4A)ï¼ŒåŒæ—¶æ¬¢è¿å„ä½[æˆä¸ºIrisæ˜Ÿæ¢](https://github.com/kataras/iris/stargazers)ï¼Œæˆ–è€…å…³æ³¨[Iris facebookä¸»é¡µ](https://facebook.com/iris.framework)ã€‚
Learn what [others say about Iris](https://www.youtube.com/watch?v=jGx0LkuUs4A) and [star](https://github.com/kataras/iris/stargazers) this github repository to stay [up to date](https://facebook.com/iris.framework).

[![Iris vs .NET Core(C#) vs Node.js (Express)](https://iris-go.com/images/benchmark-new-gray.png)](_benchmarks)

<details>
<summary>ä¸Šå›¾æ˜¯ç¬¬ä¸‰å‘æœºæ„å‘å¸ƒçš„REST Webæ¡†æ¶çš„åŸºå‡†æµ‹è¯•Benchmarks from third-party source over the rest web frameworks</summary>

![Comparison with other frameworks](https://raw.githubusercontent.com/smallnest/go-web-framework-benchmark/4db507a22c964c9bc9774c5b31afdc199a0fe8b7/benchmark.png)

_Updated at: [Friday, 29 September 2017](_benchmarks)_
</details>

## Built with â™¥ï¸
## Built with â™¥ï¸

åœ¨å‘ç°Irisä¹‹å‰ï¼Œæˆ‘æƒ³ä½ ä¸€å®šä¹Ÿçœ‹è¿‡å…¶å®ƒGo Webå¼€å‘æ¡†æ¶ï¼Œæˆ–è®¸ä½ å·²ç»æ‘©æ‹³æ“¦æŒå¹¶é©¬ä¸Šå°±è¦ç”¨ä¸Šäº†ï¼Œä½†æˆ‘ä¼šå¾ˆé—æ†¾çš„å‘Šè¯‰ä½ ï¼Œä¸ç®¡æ€æ ·ï¼Œä½ å°†æ¥è¿˜æ˜¯ä¼šä½¿ç”¨Irisçš„ã€‚ä¸ä»…ä»…å› ä¸ºIrisæ€§èƒ½å“è¶Šå’Œä½¿ç”¨ç®€å•ï¼Œæ›´é‡è¦çš„æ˜¯Iriséå¸¸ç‹¬ç‰¹ï¼Œä»–èƒ½è®©ä½ æˆä¸ºçœŸæ­£çš„æå®¢ç•Œçš„æ‘‡æ»šæ˜æ˜Ÿã€‚

We have no doubt you will able to find other web frameworks written in Go
and even put up a real fight to learn and use them for quite some time but
make no mistake, sooner or later you will be using Iris, not because of the ergonomic, high-performant solution that it provides but its well-documented unique features, as these will transform you to a real rockstar geek.

ä¸ç®¡ä½ æ˜¯æƒ³å¼€å‘å¾®æœåŠ¡æˆ–è€…å¤§å‹Webåº”ç”¨ï¼ŒIriséƒ½èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼ŒIriså¯èƒ½æ˜¯ä½ åœ¨ç½‘ä¸Šèƒ½æ‰¾åˆ°æœ€å¥½çš„Webåå°å¼€å‘è½¯ä»¶äº†ã€‚

No matter what you're trying to build, Iris covers 
every type of application, from micro services to large monolithic web applications.
It's actually the best piece of software for back-end web developers
you can find online.

Irisç°åœ¨å·²ç»åˆ°ç¬¬8ç‰ˆäº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä»æœªåœæ­¢å¼€å‘ã€‚æœ‰å¾ˆå¤šéå¸¸æ£’çš„åŠŸèƒ½å·²ç»æä¸Šå¼€å‘æ—¥ç¨‹äº†ï¼Œè€Œä¸”æˆ‘ä»¬éå¸¸ä¹æ„åŠ å…¥å¾ˆå¤šæœ‰åˆ›æ„çš„æƒ³æ³•ã€‚

Iris may have reached version 8, but we're not stopping there. We have many feature ideas on our board that we're anxious to add and other innovative web development solutions that we're planning to build into Iris.

å¦‚æœä½ æƒ³ç”¨CDNåŠ é€Ÿï¼Œæˆ‘æ¨èç”¨[KeyCDN](https://www.keycdn.com/)ï¼Œå› ä¸ºKeyCDNç®€å•ã€é€Ÿåº¦å¿«è€Œä¸”ç¨³å®šã€‚

Accelerated by [KeyCDN](https://www.keycdn.com/), a simple, fast and reliable CDN.

æˆ‘ä»¬ç”¨[å¾®è½¯](https://www.microsoft.com)å¼€å‘çš„[Visual Studio Code](https://code.visualstudio.com/)æ¥åšä¸ºå¼€å‘Golangçš„IDEã€‚ 

We are developing this project using the best code editor for Golang; [Visual Studio Code](https://code.visualstudio.com/) supported by [Microsoft](https://www.microsoft.com).

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨[nodejs](https://nodejs.org)åšå¼€å‘ï¼Œæ­å–œä½ ï¼ŒIrisä½¿ç”¨åŸºæœ¬å’Œ[expressjs](https://github.com/expressjs/express)ä¸€æ ·ã€‚

If you're coming from [nodejs](https://nodejs.org) world, Iris is the [expressjs](https://github.com/expressjs/express) equivalent for Gophers.

## å†…å®¹åˆ—è¡¨

## Table Of Content

* [å®‰è£…](#installation)
* [æœ€è¿‘æ›´æ–°](https://github.com/kataras/iris/blob/master/HISTORY.md#tu-07-november-2017--v857)
* [å¿«é€Ÿå…¥é—¨](#getting-started)
* [è¿›é˜¶](_examples/)
    * [MVC (Model View Controller)](_examples/#mvc) **NEW**
 Â  Â * [ç»“æ„](_examples/#structuring) **NEW**
 Â  Â * [HTTP ç›‘å¬](_examples/#http-listening)
 Â  Â * [é…ç½®](_examples/#configuration)
 Â  Â * [è·¯ç”±ï¼Œåˆ†ç»„ï¼ŒåŠ¨æ€å‚æ•°ï¼Œâ€œå®å®šä¹‰â€å·²ç»è‡ªå®šä¹‰Context](_examples/#routing-grouping-dynamic-path-parameters-macros-and-custom-context)
 Â  Â * [å­åŸŸåå¤„ç†](_examples/#subdomains)
 Â  Â * [`http.Handler/HandlerFunc` ä½¿ç”¨](_examples/#convert-httphandlerhandlerfunc)
 Â  Â * [è§†å›¾å¤„ç†](_examples/#view)
 Â  Â * [è®¤è¯](_examples/#authentication)
 Â  Â * [æ–‡ä»¶æœåŠ¡å™¨](_examples/#file-server)
 Â  Â * [å¦‚ä½•ä»`context.Request() *http.Request` è¯»æ•°æ®](_examples/#how-to-read-from-contextrequest-httprequest)
 Â  Â * [å¦‚ä½•ç»™`context.ResponseWriter() http.ResponseWriter`å†™æ•°æ®](_examples/#how-to-write-to-contextresponsewriter-httpresponsewriter)
 Â  Â * [æµ‹è¯•](_examples/#testing)	
 Â  Â * [ç¼“å­˜](_examples/#caching)
 Â  Â * [ä¼šè¯](_examples/#sessions)
    * [Websockets](_examples/#websockets)
 Â  Â * [å…¶å®ƒæ‚é¡¹](_examples/#miscellaneous)
    * [POC: Convert the medium-sized project "Parrot" from native to Iris](https://github.com/iris-contrib/parrot)
    * [POC: Isomorphic react/hot reloadable/redux/css-modules starter kit](https://github.com/kataras/iris-starter-kit)
    * [Typescript Automation Tools](typescript/#table-of-contents)
    * [Tutorial: A URL Shortener Service using Go, Iris and Bolt](https://medium.com/@kataras/a-url-shortener-service-using-go-iris-and-bolt-4182f0b00ae7)
    * [Tutorial: Online Visitors](_examples/tutorial/online-visitors)
    * [Tutorial: Caddy](_examples/tutorial/caddy)
    * [Tutorial: DropzoneJS Uploader](https://hackernoon.com/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991)
    * [Tutorial:Iris Go Framework + MongoDB](https://medium.com/go-language/iris-go-framework-mongodb-552e349eab9c)
* [ä¸­é—´ä»¶](middleware/)
* [Dockerä¾‹å­](https://github.com/iris-contrib/cloud-native-go)
* [è´¡çŒ®](CONTRIBUTING.md)
* [å¸¸è§é—®é¢˜](FAQ.md)
* [æ›´æ–°è®¡åˆ’?](#now-you-are-ready-to-move-to-the-next-step-and-get-closer-to-becoming-a-pro-gopher)
* [å¼€å‘è€…](#people)

## å®‰è£…

ä»…ä»…ä¾èµ–[Goè¯­è¨€](https://golang.org/dl/)

```sh
$ go get -u github.com/kataras/iris
```
Irisä½¿ç”¨[vendor](https://docs.google.com/document/d/1Bz5-UB7g2uPBdOx-rw5t9MxJwkfpx90cqG9AFL0JAYo) åŒ…ä¾èµ–ç®¡ç†æ–¹å¼ã€‚vendoråŒ…ç®¡ç†çš„æ–¹å¼å¯ä»¥æœ‰æ•ˆå¤„ç†åŒ…ä¾èµ–æ›´æ–°é—®é¢˜

## å…¥é—¨

```go
package main

import "github.com/kataras/iris"

func main() {
    app := iris.New()
 Â  Â // ä»"./views"ç›®å½•åŠ è½½HTMLæ¨¡æ¿
 Â  Â // æ¨¡æ¿è§£æhtmlåç¼€æ–‡ä»¶
 Â  Â // æ­¤æ–¹å¼æ˜¯ç”¨`html/template`æ ‡å‡†åŒ…(Irisçš„æ¨¡æ¿å¼•æ“)
    app.RegisterView(iris.HTML("./views", ".html"))

 Â  Â // HTTPæ–¹æ³•ï¼š GET
 Â  Â // è·¯å¾„ï¼š     http://localhost:8080
    app.Get("/", func(ctx iris.Context) {
 Â  Â  Â  Â // {{.message}} å’Œ "Hello world!" å­—ä¸²ç»‘å®š
        ctx.ViewData("message", "Hello world!")
 Â  Â  Â  Â // æ˜ å°„HTMLæ¨¡æ¿æ–‡ä»¶è·¯å¾„ ./views/hello.html
        ctx.View("hello.html")
    })

    // HTTPæ–¹æ³•:    GET
    // è·¯å¾„:  http://localhost:8080/user/42
    //
 Â  Â // æƒ³åœ¨è·¯å¾„ä¸­ç”¨æ­£åˆ™å—ï¼ŸSo easy!
 Â  Â // å¦‚ä¸‹æ‰€ç¤º
 Â  Â // app.Get("/user/{id:string regexp(^[0-9]+$)}")
    app.Get("/user/{id:long}", func(ctx iris.Context) {
        userID, _ := ctx.Params().GetInt64("id")
        ctx.Writef("User ID: %d", userID)
    })

 Â  Â // ç»‘å®šç«¯å£å¹¶å¯åŠ¨æœåŠ¡.
    app.Run(iris.Addr(":8080"))
}
```

> æƒ³è¦äº†è§£æ›´å¤šå…³äºè·¯å¾„å‚æ•°é…ç½®ï¼Œæˆ³[è¿™é‡Œ](https://github.com/kataras/iris/blob/master/_examples/routing/dynamic-path/main.go#L31).

```html
<!-- file: ./views/hello.html -->
<html>
<head>
    <title>Hello Page</title>
</head>
<body>
    <h1>{{.message}}</h1>
</body>
</html>
```

```sh
$ go run main.go
> åœ¨è¿™é‡Œç›‘å¬æœåŠ¡: http://localhost:8080
> åº”ç”¨å·²ç»å¯åŠ¨æŒ‰é”® CTRL+C åœæ­¢æœåŠ¡
```

> æƒ³è¦å®ç°å½“ä»£ç æ”¹å˜åè‡ªåŠ¨é‡å¯åº”ç”¨å—ï¼Ÿé‚£å°±è£…ä¸ª[rizla](https://github.com/kataras/rizla)å·¥å…·ï¼Œå¯åŠ¨goæ–‡ä»¶ç”¨ `rizla main.go` æ¥ä»£æ›¿ `go run main.go`ã€‚

Irisçš„ä¸€äº›å¼€å‘çº¦å®šå¯ä»¥çœ‹çœ‹è¿™é‡Œ[_examples/structuring](_examples/#structuring)ã€‚

### MVCæŒ‡å—

```go
package main

import (
    "github.com/kataras/iris"
    "github.com/kataras/iris/mvc"
)

func main() {
    app := iris.New()

    app.Controller("/helloworld", new(HelloWorldController))

    app.Run(iris.Addr("localhost:8080"))
}

type HelloWorldController struct {
    mvc.C

    // [ Your fields here ]
    // Request lifecycle data
    // Models
    // Database
    // Global properties
}

//
// GET: /helloworld

func (c *HelloWorldController) Get() string {
    return "This is my default action..."
}

//
// GET: /helloworld/{name:string}

func (c *HelloWorldController) GetBy(name string) string {
    return "Hello " + name
}

//
// GET: /helloworld/welcome

func (c *HelloWorldController) GetWelcome() (string, int) {
    return "This is the GetWelcome action func...", iris.StatusOK
}

//
// GET: /helloworld/welcome/{name:string}/{numTimes:int}

func (c *HelloWorldController) GetWelcomeBy(name string, numTimes int) {
    // Access to the low-level Context,
    // output arguments are optional of course so we don't have to use them here.
    c.Ctx.Writef("Hello %s, NumTimes is: %d", name, numTimes)
}

```
> [_examples/mvc](_examples/mvc) å’ŒÂ [mvc/controller_test.go](https://github.com/kataras/iris/blob/master/mvc/controller_test.go) ä¸¤ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥è®©ä½ æ›´å¥½çš„äº†è§£ Iris MVC çš„ä½¿ç”¨æ–¹å¼

æ¯ä¸€ä¸ªåœ¨controllerä¸­å¯¼å‡ºçš„Goæ–¹æ³•åéƒ½å’ŒHTTPæ–¹æ³•(`Get`, `Post`, `Put`, `Delete`...) ä¸€ä¸€å¯¹åº”

åœ¨Webåº”ç”¨ä¸­ä¸€ä¸ªHTTPè®¿é—®çš„èµ„æºå°±æ˜¯ä¸€ä¸ªURLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼Œæ¯”å¦‚`http://localhost:8080/helloworld`æ˜¯ç”±HTTPåè®®ã€WebæœåŠ¡ç½‘ç»œä½ç½®ï¼ˆåŒ…æ‹¬TCPç«¯å£ï¼‰ï¼š`localhost:8080`ä»¥åŠèµ„æºåç§°URIï¼ˆç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦ï¼‰ `/helloworld`ç»„æˆçš„ã€‚

ä¸Šé¢ä¾‹å­ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜ å°„åˆ°[HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp)æ–¹æ³•ï¼Œè®¿é—®èµ„æºæ˜¯"/helloworld"ï¼Œç¬¬ä¸‰ä¸ªæ–¹æ³•æ˜ å°„åˆ°[HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp)æ–¹æ³•ï¼Œè®¿é—®èµ„æºæ˜¯"/helloworld/welcome"


Controlleråœ¨å¤„ç†`GetBy`æ–¹æ³•æ—¶å¯ä»¥è¯†åˆ«è·¯å¾„â€˜nameâ€™å‚æ•°ï¼Œ`GetWelcomeBy`æ–¹æ³•å¯ä»¥è¯†åˆ«è·¯å¾„â€˜nameâ€™å’Œâ€˜numTimesâ€™å‚æ•°ï¼Œå› ä¸ºControlleråœ¨è¯†åˆ«`By`å…³é”®å­—åå¯ä»¥åŠ¨æ€çµæ´»çš„å¤„ç†è·¯ç”±ï¼›ä¸Šé¢ç¬¬å››ä¸ªæ–¹æ³•æŒ‡ç¤ºä½¿ç”¨ [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp)æ–¹æ³•ï¼Œè€Œä¸”åªå¤„ç†ä»¥"/helloworld/welcome"å¼€å¤´çš„èµ„æºä½ç½®è·¯å¾„ï¼Œå¹¶ä¸”æ­¤è·¯å¾„è¿˜å¾—åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œç¬¬äºŒéƒ¨åˆ†åªèƒ½æ˜¯æ•°å­—ç±»å‹ï¼Œæ¯”å¦‚"http://localhost:8080/helloworld/welcome/golang/32719" æ˜¯åˆæ³•çš„ï¼Œå…¶å®ƒçš„å°±ä¼šç»™å®¢æˆ·ç«¯è¿”å›[404 æ‰¾ä¸åˆ°](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)çš„æç¤º


### MVC å¿«é€ŸæŒ‡å— 2

Iriså¯¹MVCçš„æ”¯æŒéå¸¸ **æ£’[é«˜æ€§èƒ½](_benchmarks)** ï¼Œ Irisé€šè¿‡æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¯ä»¥ç»™å®¢æˆ·ç«¯è¿”å›ä»»æ„ç±»å‹çš„æ•°æ®ï¼š

*  å¦‚æœè¿”å›çš„æ˜¯ `string` ç±»å‹ï¼Œå°±ç›´æ¥ç»™å®¢æˆ·ç«¯è¿”å›å­—ç¬¦ä¸²
*  å¦‚æœç¬¬äºŒä¸ªè¿”å›å€¼æ˜¯ `string` ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯ContentType(HTTP header)çš„å€¼
*  å¦‚æœè¿”å›çš„æ˜¯ `int` ç±»å‹ï¼Œè¿™ä¸ªå€¼å°±æ˜¯HTTPçŠ¶æ€ç 
*  å¦‚æœè¿”å› `error` å€¼ä¸æ˜¯ç©ºï¼ŒIris å°†ä¼šæŠŠè¿™ä¸ªå€¼ä½œä¸ºHTTP 400é¡µé¢çš„è¿”å›å€¼å†…å®¹
* Â å¦‚æœè¿”å› `(int, error)` ç±»å‹ï¼Œå¹¶ä¸”errorä¸ä¸ºç©ºï¼Œé‚£ä¹ˆIrisè¿”å›errorçš„å†…å®¹ï¼ŒåŒæ—¶æŠŠ `int` å€¼ä½œä¸ºHTTPçŠ¶æ€ç 
*  å¦‚æœè¿”å› `bool` ç±»å‹ï¼Œå¹¶ä¸”å€¼æ˜¯ false ï¼ŒIrisç›´æ¥è¿”å›404é¡µé¢
*  å¦‚æœè¿”å›è‡ªå®šä¹‰` struct` ã€Â `interface{}` ã€Â `slice` åŠÂ `map` ï¼ŒIris å°†æŒ‰ç…§JSONçš„æ–¹å¼è¿”å›ï¼Œæ³¨æ„å¦‚æœç¬¬äºŒä¸ªè¿”å›å€¼æ˜¯ `string`ï¼Œé‚£ä¹ˆIriså°±æŒ‰ç…§è¿™ä¸ª `string` å€¼çš„ContentTypeå¤„ç†äº†(ä¸ä¸€å®šæ˜¯'application/json')
* Â å¦‚æœ `mvc.Result` è°ƒç”¨äº† `Dispatch` å‡½æ•°, å°±ä¼šæŒ‰ç…§è‡ªå·±çš„é€»è¾‘é‡æ–°å¤„ç†

ä¸‹é¢è¿™äº›ä¾‹å­ä»…ä¾›å‚è€ƒï¼Œç”Ÿäº§ç¯å¢ƒè°¨æ…ä½¿ç”¨

```go
package main

import (
    "github.com/kataras/iris"
    "github.com/kataras/iris/middleware/basicauth"
    "github.com/kataras/iris/mvc"
)

// Movie æ˜¯è‡ªå®šä¹‰æ•°æ®ç»“æ„
type Movie struct {
    Name   string `json:"name"`
    Year   int    `json:"year"`
    Genre  string `json:"genre"`
    Poster string `json:"poster"`
}

// movies å¯¹è±¡æ¨¡æ‹Ÿæ•°æ®æº
var movies = []Movie{
    {
        Name:   "Casablanca",
        Year:   1942,
        Genre:  "Romance",
        Poster: "https://iris-go.com/images/examples/mvc-movies/1.jpg",
    },
    {
        Name:   "Gone with the Wind",
        Year:   1939,
        Genre:  "Romance",
        Poster: "https://iris-go.com/images/examples/mvc-movies/2.jpg",
    },
    {
        Name:   "Citizen Kane",
        Year:   1941,
        Genre:  "Mystery",
        Poster: "https://iris-go.com/images/examples/mvc-movies/3.jpg",
    },
    {
        Name:   "The Wizard of Oz",
        Year:   1939,
        Genre:  "Fantasy",
        Poster: "https://iris-go.com/images/examples/mvc-movies/4.jpg",
    },
}


var basicAuth = basicauth.New(basicauth.Config{
    Users: map[string]string{
        "admin": "password",
    },
})


func main() {
    app := iris.New()

    app.Use(basicAuth)

    app.Controller("/movies", new(MoviesController))

    app.Run(iris.Addr(":8080"))
}

// MoviesController æ˜¯ /movies controller.
type MoviesController struct {
    mvc.C
}

// è¿”å› moviesåˆ—è¡¨
// ä¾‹å­:
// curl -i http://localhost:8080/movies
func (c *MoviesController) Get() []Movie {
    return movies
}

// GetBy è¿”å›ä¸€ä¸ª movie
// ä¾‹å­:
// curl -i http://localhost:8080/movies/1
func (c *MoviesController) GetBy(id int) Movie {
    return movies[id]
}

// PutBy æ›´æ–°ä¸€ä¸ª movie
// ä¾‹å­:
// curl -i -X PUT -F "genre=Thriller" -F "poster=@/Users/kataras/Downloads/out.gif" http://localhost:8080/movies/1
func (c *MoviesController) PutBy(id int) Movie {
 Â  Â // è·å–ä¸€ä¸ª movie
    m := movies[id]

 Â  Â // è·å–ä¸€ä¸ªposteræ–‡ä»¶
 Â  Â file, info, err := c.Ctx.FormFile("poster")
    if err != nil {
        c.Ctx.StatusCode(iris.StatusInternalServerError)
        return Movie{}
    }
 Â  Â file.Close() Â  Â  Â  Â  Â   // æˆ‘ä»¬ä¸éœ€è¦è¿™ä¸ªæ–‡ä»¶
 Â  Â poster := info.Filename // æ¯”å¦‚è¿™å°±æ˜¯ä¸Šä¼ çš„æ–‡ä»¶url
    genre := c.Ctx.FormValue("genre")

 Â  Â // æ›´æ–°poster
    m.Poster = poster
    m.Genre = genre
    movies[id] = m

    return m
}

// DeleteBy åˆ é™¤ä¸€ä¸ª movie
// ä¾‹å­:
// curl -i -X DELETE -u admin:password http://localhost:8080/movies/1
func (c *MoviesController) DeleteBy(id int) iris.Map {
 Â  Â //ä»movies sliceä¸­åˆ é™¤ç´¢å¼•
 Â  Â deleted := movies[id].Name
    movies = append(movies[:id], movies[id+1:]...)
 Â  Â // è¿”å›åˆ é™¤movieçš„åç§°
 Â  Â return iris.Map{"deleted": deleted}
}
```

### MVC å¿«é€ŸæŒ‡å— 3

Irisæ˜¯ä¸€ä¸ªåº•å±‚çš„Webå¼€å‘æ¡†æ¶ï¼Œå¦‚æœä½ å–œæ¬¢æŒ‰ **ç›®å½•ç»“æ„** çš„çº¦å®šæ–¹å¼å¼€å‘ï¼Œé‚£ä¹ˆIrisæ¡†æ¶å¯¹æ­¤æ¯«æ— å½±å“ã€‚

ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥åˆ›å»ºç›®å½•ç»“æ„ï¼Œä½†æ˜¯æˆ‘å»ºè®®ä½ è¿˜æ˜¯æœ€å¥½çœ‹çœ‹å¦‚ä¸‹çš„ç›®å½•ç»“æ„ä¾‹å­ï¼š

[![ç›®å½•ç»“æ„ä¾‹å­](_examples/mvc/overview/folder_structure.png)](_examples/mvc/overview)

å¥½äº†ï¼Œç›´æ¥ä¸Šä»£ç ã€‚


#### æ•°æ®æ¨¡å‹å±‚

```go
// file: datamodels/movie.go

package datamodels

// Movieæ˜¯æˆ‘ä»¬ä¾‹å­æ•°æ®ç»“æ„
// æ­¤Movieå¯èƒ½ä¼šå®šä¹‰åœ¨ç±»ä¼¼"web/viewmodels/movie.go"çš„æ–‡ä»¶
// Movieçš„æ•°æ®æ¨¡å‹åœ¨åº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªï¼Œè¿™æ ·ä½¿ç”¨å°±å¾ˆç®€å•äº†
type Movie struct {
    ID     int64  `json:"id"`
    Name   string `json:"name"`
    Year   int    `json:"year"`
    Genre  string `json:"genre"`
    Poster string `json:"poster"`
}
```

#### Data Source / Data Store Layer

```go
// file: datasource/movies.go

package datasource

import "github.com/kataras/iris/_examples/mvc/overview/datamodels"

// Moviesæ˜¯æ¨¡æ‹Ÿçš„æ•°æ®æº
var Movies = map[int64]datamodels.Movie{
    1: {
        ID:     1,
        Name:   "Casablanca",
        Year:   1942,
        Genre:  "Romance",
        Poster: "https://iris-go.com/images/examples/mvc-movies/1.jpg",
    },
    2: {
        ID:     2,
        Name:   "Gone with the Wind",
        Year:   1939,
        Genre:  "Romance",
        Poster: "https://iris-go.com/images/examples/mvc-movies/2.jpg",
    },
    3: {
        ID:     3,
        Name:   "Citizen Kane",
        Year:   1941,
        Genre:  "Mystery",
        Poster: "https://iris-go.com/images/examples/mvc-movies/3.jpg",
    },
    4: {
        ID:     4,
        Name:   "The Wizard of Oz",
        Year:   1939,
        Genre:  "Fantasy",
        Poster: "https://iris-go.com/images/examples/mvc-movies/4.jpg",
    },
    5: {
        ID:     5,
        Name:   "North by Northwest",
        Year:   1959,
        Genre:  "Thriller",
        Poster: "https://iris-go.com/images/examples/mvc-movies/5.jpg",
    },
}
```

#### æ•°æ®ä»“åº“

æ•°æ®ä»“åº“å±‚ç›´æ¥è®¿é—®æ•°æ®æº

```go
// file: repositories/movie_repository.go

package repositories

import (
    "errors"
    "sync"

    "github.com/kataras/iris/_examples/mvc/overview/datamodels"
)

// Query æ˜¯æ•°æ®è®¿é—®çš„é›†åˆå…¥å£
type Query func(datamodels.Movie) bool

// MovieRepository ä¸­ä¼šæœ‰å¯¹movieå®ä½“çš„åŸºæœ¬æ“ä½œ
type MovieRepository interface {
    Exec(query Query, action Query, limit int, mode int) (ok bool)

    Select(query Query) (movie datamodels.Movie, found bool)
    SelectMany(query Query, limit int) (results []datamodels.Movie)

    InsertOrUpdate(movie datamodels.Movie) (updatedMovie datamodels.Movie, err error)
    Delete(query Query, limit int) (deleted bool)
}

// NewMovieRepository è¿”å›movieå†…å­˜æ•°æ®
func NewMovieRepository(source map[int64]datamodels.Movie) MovieRepository {
    return &movieMemoryRepository{source: source}
}

// movieMemoryRepository å°±æ˜¯ "MovieRepository"ï¼Œå®ƒç®¡ç†movieçš„å†…å­˜æ•°æ®
type movieMemoryRepository struct {
    source map[int64]datamodels.Movie
    mu     sync.RWMutex
}

const (
 Â  Â // åªè¯»æ¨¡å¼
    ReadOnlyMode = iota
 Â  Â // è¯»å†™æ¨¡å¼
    ReadWriteMode
)

func (r *movieMemoryRepository) Exec(query Query, action Query, actionLimit int, mode int) (ok bool) {
    loops := 0

    if mode == ReadOnlyMode {
        r.mu.RLock()
        defer r.mu.RUnlock()
    } else {
        r.mu.Lock()
        defer r.mu.Unlock()
    }

    for _, movie := range r.source {
        ok = query(movie)
        if ok {
            if action(movie) {
                loops++
                if actionLimit >= loops {
                    break // break
                }
            }
        }
    }

    return
}

// Selectæ–¹æ³•è¿”å›ä»æ¨¡æ‹Ÿæ•°æ®æºæ‰¾å‡ºçš„ä¸€ä¸ªmovieæ•°æ®ã€‚
// å½“æ‰¾åˆ°æ—¶å°±è¿”å›trueï¼Œå¹¶åœæ­¢è¿­ä»£
//
// Select å°†ä¼šè¿”å›æŸ¥è¯¢åˆ°çš„æœ€æ–°æ‰¾åˆ°çš„movieæ•°æ®ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä»£ç é‡
//
// è‡ªä»æˆ‘ç¬¬ä¸€æ¬¡æƒ³åˆ°ç”¨è¿™ç§ç®€å•çš„åŸå‹å‡½æ•°åï¼Œæˆ‘å°±ç»å¸¸ç”¨å®ƒäº†ï¼Œå¸Œæœ›è¿™ä¹Ÿå¯¹ä½ æœ‰ç”¨
func (r *movieMemoryRepository) Select(query Query) (movie datamodels.Movie, found bool) {
    found = r.Exec(query, func(m datamodels.Movie) bool {
        movie = m
        return true
    }, 1, ReadOnlyMode)

 Â  Â // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±è®©datamodels.Movieä¸ºç©º
 Â  Â // set an empty datamodels.Movie if not found at all.
    if !found {
        movie = datamodels.Movie{}
    }

    return
}

// å¦‚æœè¦æŸ¥æ‰¾å¾ˆå¤šå€¼ï¼Œç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡ä¼šè¿”å›datamodels.Movie sliceã€‚
// å¦‚æœlimit<=0ï¼Œå°†è¿”å›å…¨éƒ¨æ•°æ®
func (r *movieMemoryRepository) SelectMany(query Query, limit int) (results []datamodels.Movie) {
    r.Exec(query, func(m datamodels.Movie) bool {
        results = append(results, m)
        return true
    }, limit, ReadOnlyMode)

    return
}

// æ’å…¥æˆ–æ›´æ–°æ•°æ®
//
// è¿”å›ä¸€ä¸ªæ–°çš„movieå¯¹è±¡å’Œerrorå¯¹è±¡
func (r *movieMemoryRepository) InsertOrUpdate(movie datamodels.Movie) (datamodels.Movie, error) {
    id := movie.ID

    if id == 0 { // Create new action
        var lastID int64
 Â  Â  Â  Â // ä¸ºäº†æ•°æ®ä¸é‡å¤ï¼Œæ‰¾åˆ°æœ€å¤§çš„IDã€‚
 Â  Â  Â  Â // ç”Ÿäº§ç¯å¢ƒä½ å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆä¸€ä¸ªUUIDå­—ä¸²
        r.mu.RLock()
        for _, item := range r.source {
            if item.ID > lastID {
                lastID = item.ID
            }
        }
        r.mu.RUnlock()

        id = lastID + 1
        movie.ID = id

        // map-specific thing
        r.mu.Lock()
        r.source[id] = movie
        r.mu.Unlock()

        return movie, nil
    }
 Â  Â //é€šè¿‡movie.IDæ›´æ–°æ•°æ®
 Â  Â //è¿™é‡Œä¸¾ä¸ªä¾‹å­çœ‹å¦‚æœæ›´æ–°éç©ºçš„posterå’Œgenre
 Â  Â //å…¶å®æˆ‘ä»¬å¯ä»¥ç›´æ¥æ›´æ–°å¯¹è±¡r.source[id] = movie
 Â  Â //ç”¨Selectçš„è¯å¦‚ä¸‹æ‰€ç¤º
    current, exists := r.Select(func(m datamodels.Movie) bool {
        return m.ID == id
    })

 Â  Â if !exists { // IDä¸å­˜åœ¨ï¼Œè¿”å›error ID
        return datamodels.Movie{}, errors.New("failed to update a nonexistent movie")
    }

 Â  Â // æˆ–è€…ç›´æ¥å¯¹è±¡æ“ä½œæ›¿æ¢
 Â  Â // or comment these and r.source[id] = m for pure replace
    if movie.Poster != "" {
        current.Poster = movie.Poster
    }
    
    if movie.Genre != "" {
        current.Genre = movie.Genre
    }

 Â  Â // ç±»mapç»“æ„çš„å¤„ç†
 Â  Â r.mu.Lock()
    r.source[id] = current
    r.mu.Unlock()

    return movie, nil
}

func (r *movieMemoryRepository) Delete(query Query, limit int) bool {
    return r.Exec(query, func(m datamodels.Movie) bool {
        delete(r.source, m.ID)
        return true
    }, limit, ReadWriteMode)
}
```

#### æœåŠ¡å±‚

æœåŠ¡å±‚ä¸»è¦è°ƒç”¨â€œæ•°æ®ä»“åº“â€å’Œâ€œæ•°æ®æ¨¡å‹â€çš„æ–¹æ³•ï¼ˆå³ä½¿æ˜¯æ•°æ®æ¨¡å‹å¾ˆç®€å•çš„åº”ç”¨ï¼‰ã€‚è¿™ä¸€å±‚å°†åŒ…å«ä¸»è¦çš„æ•°æ®å¤„ç†é€»è¾‘ã€‚


```go
// file: services/movie_service.go

package services

import (
    "github.com/kataras/iris/_examples/mvc/overview/datamodels"
    "github.com/kataras/iris/_examples/mvc/overview/repositories"
)

// MovieServiceä¸»è¦åŒ…æ‹¬å¯¹movieçš„CRUIDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œã€‚
// MovieServiceä¸»è¦è°ƒç”¨movie æ•°æ®ä»“åº“çš„æ–¹æ³•ã€‚
// ä¸‹é¢ä¾‹å­çš„æ•°æ®æºæ˜¯æ›´é«˜çº§åˆ«çš„ç»„ä»¶
// è¿™æ ·å¯ä»¥ç”¨åŒæ ·çš„é€»è¾‘å¯ä»¥è¿”å›ä¸åŒçš„æ•°æ®ä»“åº“
// MovieServiceæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»»ä½•å®ç°çš„åœ°æ–¹éƒ½èƒ½ç”¨ï¼Œè¿™æ ·å¯ä»¥æ›¿æ¢ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ç”¨æ¥æµ‹è¯•
type MovieService interface {
    GetAll() []datamodels.Movie
    GetByID(id int64) (datamodels.Movie, bool)
    DeleteByID(id int64) bool
    UpdatePosterAndGenreByID(id int64, poster string, genre string) (datamodels.Movie, error)
}

// NewMovieService è¿”å›ä¸€ä¸ª movie æœåŠ¡.
func NewMovieService(repo repositories.MovieRepository) MovieService {
    return &movieService{
        repo: repo,
    }
}

type movieService struct {
    repo repositories.MovieRepository
}

// GetAll è¿”å›æ‰€æœ‰ movies.
func (s *movieService) GetAll() []datamodels.Movie {
    return s.repo.SelectMany(func(_ datamodels.Movie) bool {
        return true
    }, -1)
}

// GetByID æ˜¯é€šè¿‡idæ‰¾åˆ°movie.
func (s *movieService) GetByID(id int64) (datamodels.Movie, bool) {
    return s.repo.Select(func(m datamodels.Movie) bool {
        return m.ID == id
    })
}


// UpdatePosterAndGenreByID æ›´æ–°ä¸€ä¸ª movieçš„ poster å’Œ genre.
func (s *movieService) UpdatePosterAndGenreByID(id int64, poster string, genre string) (datamodels.Movie, error) {
    // update the movie and return it.
    return s.repo.InsertOrUpdate(datamodels.Movie{
        ID:     id,
        Poster: poster,
        Genre:  genre,
    })
}

// DeleteByID é€šè¿‡idåˆ é™¤ä¸€ä¸ªmovie
//
// è¿”å›trueè¡¨ç¤ºæˆåŠŸï¼Œå…¶å®ƒéƒ½æ˜¯å¤±è´¥
func (s *movieService) DeleteByID(id int64) bool {
    return s.repo.Delete(func(m datamodels.Movie) bool {
        return m.ID == id
    }, 1)
}
```

#### è§†å›¾æ¨¡å‹

è§†å›¾æ¨¡å‹å°†å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯

ä¾‹å­ï¼š
Example:

```go
import (
    "github.com/kataras/iris/_examples/mvc/overview/datamodels"

    "github.com/kataras/iris/context"
)

type Movie struct {
    datamodels.Movie
}

func (m Movie) IsValid() bool {
 Â  Â /* åšä¸€äº›æ£€æµ‹ï¼Œå¦‚æœIDåˆæ³•å°±è¿”å›true */
    return m.ID > 0
}
```

Iriså…è®¸åœ¨HTTP Response Dispatcherä¸­ä½¿ç”¨ä»»ä½•è‡ªå®šä¹‰æ•°æ®ç»“æ„ï¼Œ
æ‰€ä»¥ç†è®ºä¸Šæ¥è¯´ï¼Œé™¤éä¸‡ä¸å¾—å·²ï¼Œä¸‹é¢çš„ä»£ç ä¸å»ºè®®ä½¿ç”¨

```go
// Dispatchå®ç°äº†`kataras/iris/mvc#Result`æ¥å£ã€‚åœ¨å‡½æ•°æœ€åå‘é€äº†ä¸€ä¸ª`Movie`å¯¹è±¡ä½œä¸ºhttp responseå¯¹è±¡ã€‚
// å¦‚æœIDå°äºç­‰äº0å°±å›è¿”å›404ï¼Œæˆ–è€…å°±è¿”å›jsonæ•°æ®ã€‚
//ï¼ˆè¿™æ ·å°±åƒæ§åˆ¶å™¨çš„æ–¹æ³•é»˜è®¤è¿”å›è‡ªå®šä¹‰ç±»å‹ä¸€æ ·ï¼‰
//
// ä¸è¦åœ¨è¿™é‡Œå†™è¿‡å¤šçš„ä»£ç ï¼Œåº”ç”¨çš„ä¸»è¦é€»è¾‘ä¸åœ¨è¿™é‡Œ
// åœ¨æ–¹æ³•è¿”å›ä¹‹å‰å¯ä»¥åšä¸ªç®€å•éªŒè¯å¤„ç†ç­‰ç­‰ï¼›
//
// è¿™é‡Œåªæ˜¯ä¸€ä¸ªå°ä¾‹å­ï¼Œæƒ³æƒ³è¿™ä¸ªä¼˜åŠ¿åœ¨è®¾è®¡å¤§å‹åº”ç”¨æ˜¯å¾ˆæœ‰ä½œç”¨çš„
//
// è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨`Movie`ç±»å‹çš„æ§åˆ¶å™¨è°ƒç”¨çš„ã€‚
// ä¾‹å­åœ¨è¿™é‡Œï¼š`controllers/movie_controller.go#GetBy`ã€‚
func (m Movie) Dispatch(ctx context.Context) {
    if !m.IsValid() {
        ctx.NotFound()
        return
    }
    ctx.JSON(m, context.JSON{Indent: " "})
}
```
ç„¶è€Œï¼Œæˆ‘ä»¬ä»…ä»…ç”¨"datamodels"ä½œä¸ºä¸€ä¸ªæ•°æ®æ¨¡å‹åŒ…ï¼Œæ˜¯å› ä¸ºMovieæ•°æ®ç»“æ„æ²¡æœ‰åŒ…å«æ•æ„Ÿæ•°æ®ï¼Œå®¢æˆ·ç«¯å¯ä»¥è®¿é—®åˆ°å…¶æ‰€æœ‰å­—æ®µï¼Œæˆ‘ä»¬ä¸éœ€è¦å†æœ‰é¢å¤–çš„åŠŸèƒ½å»åšéªŒè¯å¤„ç†äº†


#### æ§åˆ¶å™¨

æ§åˆ¶å™¨å¤„ç†Webè¯·æ±‚ï¼Œå®ƒæ˜¯æœåŠ¡å±‚å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„æ¡¥æ¢

```go
// file: web/controllers/movie_controller.go

package controllers

import (
    "errors"

    "github.com/kataras/iris/_examples/mvc/overview/datamodels"
    "github.com/kataras/iris/_examples/mvc/overview/services"

    "github.com/kataras/iris"
    "github.com/kataras/iris/mvc"
)

// MovieControlleræ˜¯/moviesçš„æ§åˆ¶å™¨
type MovieController struct {
    mvc.C

 Â  Â // MovieServiceæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸»appå¯¹è±¡ä¼šæŒæœ‰å®ƒ
    Service services.MovieService
}

// è·å–moviesåˆ—è¡¨
// ä¾‹å­ï¼š
// curl -i http://localhost:8080/movies
//
// å¦‚æœä½ æœ‰ä¸€äº›æ•æ„Ÿçš„æ•°æ®è¦å¤„ç†çš„è¯ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ‰€ç¤ºçš„æ–¹å¼ï¼š
// func (c *MovieController) Get() (results []viewmodels.Movie) {
//  data := c.Service.GetAll()
//
//  for _, movie := range data {
// 	  results = append(results, viewmodels.Movie{movie})
//  }
//  return
// }
//å¦åˆ™ç›´æ¥è¿”å›æ•°æ®æ¨¡å‹
func (c *MovieController) Get() (results []datamodels.Movie) {
    return c.Service.GetAll()
}

// GetByè¿”å›ä¸€ä¸ªmovieå¯¹è±¡
// ä¾‹å­ï¼š
// curl -i http://localhost:8080/movies/1
func (c *MovieController) GetBy(id int64) (movie datamodels.Movie, found bool) {
 Â  Â return c.Service.GetByID(id) // 404 æ²¡æœ‰æ‰¾åˆ°
}

// PutByæ›´æ–°ä¸€ä¸ªmovie.
// ä¾‹å­:
// curl -i -X PUT -F "genre=Thriller" -F "poster=@/Users/kataras/Downloads/out.gif" http://localhost:8080/movies/1
func (c *MovieController) PutBy(id int64) (datamodels.Movie, error) {
 Â  Â // ä»è¯·æ±‚ä¸­è·å–posterå’Œgenre
    file, info, err := c.Ctx.FormFile("poster")
    if err != nil {
        return datamodels.Movie{}, errors.New("failed due form file 'poster' missing")
    }
 Â  Â // å…³é—­æ–‡ä»¶
 Â  Â file.Close()

 Â  Â //æƒ³è±¡è¿™å°±æ˜¯ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„url
    poster := info.Filename
    genre := c.Ctx.FormValue("genre")

    return c.Service.UpdatePosterAndGenreByID(id, poster, genre)
}

// DeleteByåˆ é™¤ä¸€ä¸ªmovieå¯¹è±¡
// ä¾‹å­:
// curl -i -X DELETE -u admin:password http://localhost:8080/movies/1
func (c *MovieController) DeleteBy(id int64) interface{} {
    wasDel := c.Service.DeleteByID(id)
    if wasDel {
 Â  Â  Â  Â // è¿”å›è¦åˆ é™¤çš„ID
        return iris.Map{"deleted": id}
    }
 Â  Â //ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œå¯ä»¥è¿”å›ä¸€ä¸ªæœ‰2ä¸ªè¿”å›å€¼(mapæˆ–int)çš„å‡½æ•°
 Â  Â //æˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šä¸€ä¸ªè¿”å›çš„ç±»å‹
    return iris.StatusBadRequest
}
```

```go
// file: web/controllers/hello_controller.go

package controllers

import (
    "errors"

    "github.com/kataras/iris/mvc"
)

// HelloControlleræ˜¯æ§åˆ¶å™¨çš„ä¾‹å­
// ä¸‹é¢ä¼šå¤„ç†GET: /hello and GET: /hello/{name}
type HelloController struct {
    mvc.C
}

var helloView = mvc.View{
    Name: "hello/index.html",
    Data: map[string]interface{}{
        "Title":     "Hello Page",
        "MyMessage": "Welcome to my awesome website",
    },
}

// Getä¼šè¿”å›é¢„å®šä¹‰ç»‘å®šæ•°æ®çš„è§†å›¾
//
// `mvc.Result`æ˜¯ä¸€ä¸ªå«æœ‰`Dispatch`æ–¹æ³•çš„æ¥å£
// `mvc.Response` å’Œ `mvc.View` dispatchers å†…ç½®ç±»å‹
// ä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ç°`github.com/kataras/iris/mvc#Result`æ¥å£æ¥è‡ªå®šä¹‰dispatchers
func (c *HelloController) Get() mvc.Result {
    return helloView
}

// ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæ ‡å‡†é€šç”¨çš„error
var errBadName = errors.New("bad name")

//ä½ ä¹Ÿå¯ä»¥å°†erroråŒ…è£¹åœ¨mvc.Responseä¸­ï¼Œè¿™æ ·å°±å’Œmvc.Resultç±»å‹å…¼å®¹äº†
var badName = mvc.Response{Err: errBadName, Code: 400}

// GetBy è¿”å› "Hello {name}" response
// ä¾‹å­:
// curl -i http://localhost:8080/hello/iris
// curl -i http://localhost:8080/hello/anything
func (c *HelloController) GetBy(name string) mvc.Result {
    if name != "iris" {
        return badName
 Â  Â  Â  Â // æˆ–è€…
 Â  Â  Â  Â // GetBy(name string) (mvc.Result, error) {
        //  return nil, errBadName
        // }
    }

 Â  Â // è¿”å› mvc.Response{Text: "Hello " + name} æˆ–è€…:
    return mvc.View{
        Name: "hello/name.html",
        Data: name,
    }
}
```

```go
// file: web/middleware/basicauth.go

package middleware

import "github.com/kataras/iris/middleware/basicauth"

// BasicAuth ä¸­é—´ä»¶ä¾‹
var BasicAuth = basicauth.New(basicauth.Config{
    Users: map[string]string{
        "admin": "password",
    },
})
```

```html
<!-- file: web/views/hello/index.html -->
<html>

<head>
    <title>{{.Title}} - My App</title>
</head>

<body>
    <p>{{.MyMessage}}</p>
</body>

</html>
```

```html
<!-- file: web/views/hello/name.html -->
<html>

<head>
    <title>{{.}}' Portfolio - My App</title>
</head>

<body>
    <h1>Hello {{.}}</h1>
</body>

</html>
```

> æˆ³[_examples/view](_examples/#view) å¯ä»¥æ‰¾åˆ°æ›´å¤šå…³äºlayoutsï¼Œtmplï¼Œroutingçš„ä¾‹å­


#### ç¨‹åºå…¥å£

ç¨‹åºå…¥å£å¯ä»¥å°†ä»»ä½•ç»„ä»¶åŒ…å«è¿›æ¥

```go
// file: main.go

package main

import (
    "github.com/kataras/iris/_examples/mvc/overview/datasource"
    "github.com/kataras/iris/_examples/mvc/overview/repositories"
    "github.com/kataras/iris/_examples/mvc/overview/services"
    "github.com/kataras/iris/_examples/mvc/overview/web/controllers"
    "github.com/kataras/iris/_examples/mvc/overview/web/middleware"

    "github.com/kataras/iris"
)

func main() {
    app := iris.New()

 Â  Â // åŠ è½½æ¨¡æ¿æ–‡ä»¶
 Â  Â app.RegisterView(iris.HTML("./web/views", ".html"))

 Â  Â // æ³¨å†Œæ§åˆ¶å™¨
 Â  Â app.Controller("/hello", new(controllers.HelloController))

 Â  Â // åˆ›å»ºmovie æ•°æ®ä»“åº“ï¼Œæ¬¡ä»“åº“åŒ…å«çš„æ˜¯å†…å­˜çº§çš„æ•°æ®æº
 Â  Â repo := repositories.NewMovieRepository(datasource.Movies)
 Â  Â // åˆ›å»ºmovieæœåŠ¡, ç„¶åå°†å…¶ä¸æ§åˆ¶å™¨ç»‘å®š
 Â  Â movieService := services.NewMovieService(repo)

    app.Controller("/movies", new(controllers.MovieController),
 Â  Â  Â  Â // å°†"movieService"ç»‘å®šåœ¨ MovieControllerçš„Serviceæ¥å£
 Â  Â  Â  Â movieService,
 Â  Â  Â  Â // ä¸º/moviesè¯·æ±‚æ·»åŠ basic authentication(admin:password)ä¸­é—´ä»¶
        middleware.BasicAuth)

 Â  Â // å¯åŠ¨åº”ç”¨localhost:8080
    // http://localhost:8080/hello
    // http://localhost:8080/hello/iris
    // http://localhost:8080/movies
    // http://localhost:8080/movies/1
    app.Run(
        iris.Addr("localhost:8080"),
        iris.WithoutVersionChecker,
        iris.WithoutServerError(iris.ErrServerClosed),
 Â  Â  Â  Â iris.WithOptimizations, // å¯ä»¥å¯ç”¨å¿«é€Ÿjsonåºåˆ—åŒ–ç­‰ä¼˜åŒ–é…ç½®
 Â  Â )
}
```

æ›´å¤šæŒ‡å—æˆ³ [_examples/#structuring](_examples/#structuring)

## ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼Œåˆå‘ä¸“å®¶çº§gopherè¿ˆè¿›ä¸€æ­¥äº†

æ­å–œä½ çœ‹åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†æ›´é«˜æ°´å¹³çš„å†…å®¹ï¼Œå‘çœŸæ­£çš„ä¸“å®¶çº§gopherè¿›å†›å§ğŸ˜ƒ

> å‡†å¤‡å¥½å’–å•¡ï¼Œå°½æƒ…äº«å—å§ï¼

* [Iris Go çŸ¿å»º+ MongoDB](https://medium.com/go-language/iris-go-framework-mongodb-552e349eab9c)
* [ç”¨DropzoneJS å’Œ Goæ¥æ„å»ºè¡¨å•æ–‡ä»¶ä¸Šä¼ ](https://hackernoon.com/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991)
* [ç”¨DropzoneJS å’Œ Goæ¥å‘ˆç°æœåŠ¡å™¨ä¸Šçš„é—®é¢˜](https://hackernoon.com/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19)
* [Irisæ¨¡å—åŒ–Webå¼€å‘æ¡†æ¶](https://medium.com/@corebreaker/iris-web-cd684b4685c7)
* [æŒ‰ç…§ HTTP æ€§èƒ½æ¥æ¯”è¾ƒGo å’Œ .NET Core](https://medium.com/@kataras/go-vs-net-core-in-terms-of-http-performance-7535a61b67b8)
* [æŒ‰ç…§ HTTP æ€§èƒ½æ¥æ¯”è¾ƒGo å’Œ .NET Core Kestrel](https://hackernoon.com/iris-go-vs-net-core-kestrel-in-terms-of-http-performance-806195dc93d5)
* [åœ¨Androidè®¾å¤‡ä¸Šæ­å»ºWebæœåŠ¡å™¨](https://twitter.com/ThePracticalDev/status/892022594031017988)
* [åœ¨hasuraä¸Šéƒ¨ç½²Irisåº”ç”¨](https://medium.com/@HasuraHQ/deploy-an-iris-golang-app-with-backend-apis-in-minutes-25a559bf530b)
* [ç”¨Iris å’Œ Boltå®ç°çŸ­è¿æ¥æœåŠ¡](https://medium.com/@kataras/a-url-shortener-service-using-go-iris-and-bolt-4182f0b00ae7)

## ä½œè€…

 Irisçš„ä½œè€…æ˜¯[@kataras](https://github.com/kataras), ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥äº†è§£ä½œè€…ï¼š

* [Medium](https://medium.com/@kataras)
* [Twitter](https://twitter.com/makismaropoulos)
* [Dev.to](https://dev.to/@kataras)
* [Facebook](https://facebook.com/iris.framework)
* [Mail](mailto:kataras2006@hotmail.com?subject=Iris%20I%20need%20some%20help%20please)

[ä½œè€…](AUTHORS)

[è´¡çŒ®è€…åˆ—è¡¨](https://github.com/kataras/iris/graphs/contributors)

ä½ å¯ä»¥é€šè¿‡[PayPal](https://www.paypal.me/kataras) æˆ–Â [BTC](https://iris-go.com/v8/donate)æ¥æèµ è¿™ä¸ªé¡¹ç›®ï¼Œè¿™æ ·å¯ä»¥ä¿ƒè¿›å¼€å‘è€…ä»¬åˆ›é€ æ›´æ£’ã€æ›´ä¼˜ç§€çš„Irisã€‚

[å¦‚ä½•è´¡çŒ®ä»£ç ](CONTRIBUTING.md)

### æˆ‘ä»¬æœŸå¾…ä½ èƒ½å¸®åŠ©æˆ‘ä»¬ç¿»è¯‘Irisæ–‡æ¡£

Iriséœ€è¦ä½ çš„å¸®åŠ©ï¼Œå¸®åŠ©æˆ‘ä»¬ç¿»è¯‘[README](README.md)å’Œhttps://iris-go.com ï¼ŒåŒæ—¶ä½ ä¹Ÿä¼šå¾—åˆ°å¥–åŠ±çš„ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œhttps://github.com/kataras/iris/issues/796 çœ‹åˆ°è¯¦ç»†çš„æœ‰å…³ç¿»è¯‘çš„ä¿¡æ¯


### Iris ç”¨æˆ·ä½“éªŒåé¦ˆ | 2017å¹´10æœˆ3å· 

**è¯·æ”¾å¿ƒ** Irisç”¨æˆ·ä½“éªŒåé¦ˆå°±æ˜¯ä¸€äº›ç®€å•çš„è¡¨å•æäº¤ï¼Œ**2åˆ†é’Ÿ**å°±èƒ½æå®šã€‚

è¿™äº›è¡¨å•é‡Œæœ‰äº›é—®é¢˜æ˜¯ä¸ºäº†æ›´å¥½çš„äº†è§£ä½ ï¼Œäº†è§£ä½ å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„ä¸ºä½ æœåŠ¡ã€‚

https://docs.google.com/forms/d/e/1FAIpQLSdCxZXPANg_xHWil4kVAdhmh7EBBHQZ_4_xSZVDL-oCC_z5pA/viewform?usp=sf_link

## è´¡çŒ®è€…åˆ—è¡¨

éå¸¸æ„Ÿè°¢æ‰€æœ‰å¯¹Irisçš„è´¡çŒ®è€…ï¼Œæ²¡æœ‰ä½ ä»¬å°±æ²¡æœ‰Iris [Contribute](CONTRIBUTING.md)
<a href="graphs/contributors"><img src="https://opencollective.com/iris/contributors.svg?width=890" /></a>

## èµ„åŠ©è€…

ä¸‡åˆ†æ„Ÿè°¢æ‰€æœ‰çš„èµ„åŠ©è€…ğŸ™ [æˆä¸ºèµ„åŠ©è€…](https://opencollective.com/iris#backer)

<a href="https://opencollective.com/iris#backers" target="_blank"><img src="https://opencollective.com/iris/backers.svg?width=890"></a>

## èµåŠ©å•†

èµ„åŠ©Irisï¼Œä½ å°†æ˜¯Irisçš„èµåŠ©å•†ï¼Œä½ çš„logoå°†ä¼šå‡ºç°åœ¨ä¸‹é¢çš„åˆ—è¡¨ä¸­ï¼Œ[æˆä¸ºèµåŠ©å•†](https://opencollective.com/iris#sponsor)

<a href="https://opencollective.com/iris/sponsor/0/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/0/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/1/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/1/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/2/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/2/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/3/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/3/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/4/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/4/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/5/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/5/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/6/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/6/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/7/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/7/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/8/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/8/avatar.svg"></a>
<a href="https://opencollective.com/iris/sponsor/9/website" target="_blank"><img src="https://opencollective.com/iris/sponsor/9/avatar.svg"></a>

## å¼€æºè®¸å¯è¯

Irisä½¿ç”¨3-Clause BSD [è®¸å¯è¯](LICENSE)å¼€æºè®¸å¯ ã€‚Irisç»å¯¹æ˜¯100%å¼€æºçš„ã€‚
å¯¹è¿™ä¸ªè®¸å¯æœ‰ä»»ä½•ç–‘é—®è¯·[è”ç³»æˆ‘ä»¬](mailto:kataras2006@hotmail.com?subject=Iris%20License)
